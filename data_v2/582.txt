a numerically controlled oscillator nco is a digital signal generator which creates a synchronous i e clocked discrete time discrete valued representation of a waveform usually sinusoidal ncos are often used in conjunction with a digital to analog converter dac at output to create a direct digital synthesizer dds numerically controlled oscillators offer several advantages over other types of oscillators in terms of agility accuracy stability and reliability ncos are used in many communications systems including digital up down converters used in 3g wireless and software radio systems digital radar systems drivers for optical or acoustic transmissions and multilevel fsk psk modulators operation an nco generally consists of two parts a phase accumulator pa which adds to value held at its output a frequency control value at each clock sample a phase to amplitude converter pac which uses phase accumulator output word phase word usually as an index into a waveform look up table lut to provide a corresponding amplitude sample sometimes interpolation is used with look up table to provide better accuracy and reduce phase error noise other methods of converting phase to amplitude including mathematical algorithms such as power series can be used particularly in a software nco frame figure 1 numerically controlled oscillator with optional quadrature output when clocked phase accumulator pa creates a modulo 2n sawtooth waveform which is then converted by phase to amplitude converter pac to a sampled sinusoid where n is number of bits carried in phase accumulator n sets nco frequency resolution and is normally much larger than number of bits defining memory space of pac look up table if pac capacity is 2m pa output word must be truncated to m bits as shown in figure 1 however truncated bits can be used for interpolation truncation of phase output word does not affect frequency accuracy but produces a time varying periodic phase error which is a primary source of spurious products another spurious product generation mechanism is finite word length effects of pac output amplitude word frequency accuracy relative to clock frequency is limited only by precision of arithmetic used to compute phase ncos are phase and frequency agile and can be trivially modified to produce a phase modulated or frequency modulated output by summation at appropriate node or provide quadrature outputs as shown in figure phase accumulator a binary phase accumulator consists of an n bit binary adder and a register configured as shown in figure 1 each clock cycle produces a new n bit output consisting of previous output obtained from register summed with frequency control word fcw which is constant for a given output frequency resulting output waveform is a staircase with step size integer value of fcw in some configurations phase output is taken from output of register which introduces a one clock cycle latency but allows adder to operate at a higher clock rate frame figure 2 normalized phase accumulator output adder is designed to overflow when sum of absolute value of its operands exceeds its capacity 2n 1 overflow bit is discarded so output word width is always equal to its input word width remainder called residual is stored in register and cycle repeats starting this time from see figure 2 since a phase accumulator is a finite state machine eventually residual at some sample k must return to initial value interval k is referred to as grand repetition rate grr given by where is greatest common divisor function grr represents true periodicity for a given which for a high resolution nco can be very long usually we are more interested in operating frequency determined by average overflow rate given by 1 frequency resolution defined as smallest possible incremental change in frequency is given by 2 equation 1 shows that phase accumulator can be thought of as a programmable non integer frequency divider of divide ratio phase to amplitude converter phase amplitude converter creates sample domain waveform from truncated phase output word received from pa pac can be a simple read only memory containing 2m contiguous samples of desired output waveform which typically is a sinusoid often though various tricks are employed to reduce amount of memory required this include various trigonometric expansions trigonometric approximations and methods which take advantage of quadrature symmetry exhibited by alternatively pac may consist of random access memory which can be filled as desired to create an arbitrary waveform generator spurious products spurious products are result of harmonic or non harmonic distortion in creation of output waveform due to non linear numerical effects in signal processing chain only numerical errors are covered here for other distortion mechanisms created in digital to analog converter see corresponding section in direct digital synthesizer article phase truncation spurs number of phase accumulator bits of an nco n is usually between 16 and 64 if pa output word were used directly to index pac look up table an high storage capacity in rom would be required as such pa output word must be truncated to span a reasonable memory space truncation of phase word causes phase modulation of output sinusoid which introduces non harmonic distortion in proportion to number of bits truncated number of spurious products created by this distortion is given by 3 where w is number of bits truncated in calculating spurious free dynamic range we are interested in spurious product with largest amplitude relative to carrier output level given by where p is size of phase to amplitude converter s lookup table in bits i e m in figure 1 for w 4 another related spurious generation method is slight modulation due to grr outlined above amplitude of these spurs is low for large n and their frequency is generally too low to be detectable but they may cause issues for some applications amplitude truncation spurs another source of spurious products is amplitude quantization of sampled waveform contained in pac look up table s if number of dac bits is p am spur level is approximately equal to 6 02 p 1 76 mitigation techniques phase truncation spurs can be reduced substantially by introduction of white gaussian noise prior to truncation so called dither noise is summed into lower w 1 bits of pa output word to truncation operation often improvement can be achieved without penalty because dac noise floor tends to dominate system performance amplitude truncation spurs can not be mitigated in this fashion introduction of noise into static values held in pac roms would not eliminate of truncation error terms and thus would not achieve desired effect see also direct digital synthesizer dds digitally controlled oscillator dco digital to analog converter dac references category digital signal processing category synthesizers category electronic oscillators category digital electronics